package {	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	import flash.events.Event;	import flash.display.Stage;	import flash.display.MovieClip;	import flash.geom.ColorTransform;	import Items.CardItem;	public class Factory	{		private var documentClass:DocumentClass;		private var you:MovieClip;				private var clickSound:ClickSound;		private var failSound:FailSound;				private var pipeline:Pipeline;		public function Factory(documentClass:DocumentClass)		{			this.documentClass = documentClass;			this.you = documentClass.you;						this.clickSound = new ClickSound();			this.failSound = new FailSound();						this.pipeline = documentClass.pipeline;			this.pipeline.addItems([new CardItem]);			this.you.stop();						this.documentClass.control_up.x = 60;			this.documentClass.control_up.y = 330;			trace(this.documentClass.control_up.x);			documentClass.stage.addEventListener(KeyboardEvent.KEY_DOWN, this.keyPressed);			documentClass.stage.addEventListener(KeyboardEvent.KEY_UP, this.keyReleased);			documentClass.stage.addEventListener(Event.ENTER_FRAME, this.pipeline.process);		}		private function keyReleased(event:KeyboardEvent)		{			var color:ColorTransform = new ColorTransform();			color.redOffset = 0;			color.greenOffset = 0;			color.blueOffset = 0;			this.documentClass.control_left.transform.colorTransform = 			this.documentClass.control_up.transform.colorTransform = 			this.documentClass.control_right.transform.colorTransform = 			this.documentClass.control_down.transform.colorTransform = color;		}		private function keyPressed(event:KeyboardEvent)		{			var color:ColorTransform = new ColorTransform();			color.redOffset = 64;			color.greenOffset = 64;			color.blueOffset = 64;			switch (event.keyCode)			{				case Keyboard.LEFT :					this.documentClass.control_left.transform.colorTransform = color;					break;				case Keyboard.UP :					this.documentClass.control_up.transform.colorTransform = color;					break;				case Keyboard.RIGHT :					this.documentClass.control_right.transform.colorTransform = color;					break;				case Keyboard.DOWN :					this.documentClass.control_down.transform.colorTransform = color;					break;				default :					return;			}			this.you.gotoAndStop(this.you.currentFrame+5);			if (this.you.currentFrame >= this.you.totalFrames)			{				this.you.gotoAndStop(1);			}			this.clickSound.play();		}	}}